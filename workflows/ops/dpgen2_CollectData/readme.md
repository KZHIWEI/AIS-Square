**Name** : dpgen2.op.collect_data.CollectData

**Input :** 

​            \- `name`: (`str`) The name of this iteration. The data generated by this iteration will be place in a sub-directory of `name`.

​            \- `labeled_data`: (`Artifact(List[Path])`) The paths of labeled data generated by FP tasks of the current iteration.

​            \- `iter_data`: (`Artifact(List[Path])`) The data paths previous iterations.

**Output :**

​			- `iter_data`: (`Artifact(List[Path])`) The data paths of previous and the current iteration data.

**Description :**

​			This OP is extracted from **dpgen2** workflow.

​			This OP collect data scattered in directories given by `ip['labeled_data']` in to one `dpdata.Multisystems` and store it in a directory named `name`.  This directory is appended to the list `iter_data`.

**Source :** 

```python
# Inputs
name: str
type_map: typing.List[str]
labeled_data: Artifact(type=typing.List[pathlib.Path], optional=False, sub_path=True)
iter_data: Artifact(type=typing.List[pathlib.Path], optional=False, sub_path=True)
  
# Outputs
iter_data: Artifact(type=typing.List[pathlib.Path], optional=False, sub_path=True)

# Execute
    @OP.exec_sign_check
    def execute(
            self,
            ip : OPIO,
    ) -> OPIO:
        r"""Execute the OP. This OP collect data scattered in directories given by ip['labeled_data'] 
        in to one dpdata.Multisystems and store it in a directory named name. This directory is appended
        to the list iter_data.

        Parameters
        ----------
        ip : dict
            Input dict with components:
        
            - name: (str) The name of this iteration. The data generated by this iteration will be place in a sub-directory of name.
            - labeled_data: (Artifact(List[Path])) The paths of labeled data generated by FP tasks of the current iteration.
            - iter_data: (Artifact(List[Path])) The data paths previous iterations.

        Returns
        -------
            Output dict with components:
        
            - iter_data: (Artifact(List[Path])) The data paths of previous and the current iteration data.
        
        """
        name = ip['name']
        type_map = ip['type_map']
        labeled_data = ip['labeled_data']
        iter_data = ip['iter_data']

        ms = dpdata.MultiSystems(type_map=type_map)
        for ii in labeled_data:
            ss = dpdata.LabeledSystem(ii, fmt='deepmd/npy')
            ms.append(ss)
        
        # NOTICE:
        # if ms.get_nframes() == 0, ms.to_deepmd_npy would not make the dir Path(name)
        Path(name).mkdir()
        ms.to_deepmd_npy(name)
        iter_data.append(Path(name))

        return OPIO({
            'iter_data' : iter_data,
        })
```

